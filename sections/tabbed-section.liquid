<div class="quick-info-tabs" style="--tab-height: {{ section.settings.section_height }}px; --accent-color: {{ section.settings.accent_color }}; --bg-color: {{ section.settings.background_color }};">
  
  {%- comment -%} Tab Navigation {%- endcomment -%}
  <div class="tabs-nav" role="tablist">
    {%- for block in section.blocks -%}
      <button 
        class="tab-btn{% if forloop.first %} active{% endif %}"
        role="tab"
        aria-selected="{% if forloop.first %}true{% else %}false{% endif %}"
        aria-controls="tab-panel-{{ block.id }}"
        id="tab-{{ block.id }}"
        data-tab-index="{{ forloop.index0 }}"
        {{ block.shopify_attributes }}
      >
        {%- case block.settings.icon -%}
          {%- when 'location' -%}
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
              <circle cx="12" cy="10" r="3"/>
            </svg>
          {%- when 'info' -%}
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M12 16v-4"/>
              <path d="M12 8h.01"/>
            </svg>
          {%- when 'bell' -%}
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
            </svg>
          {%- when 'music' -%}
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M9 18V5l12-2v13"/>
              <circle cx="6" cy="18" r="3"/>
              <circle cx="18" cy="16" r="3"/>
            </svg>
          {%- when 'heart' -%}
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
          {%- when 'calendar' -%}
            <svg class="tab-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
        {%- endcase -%}
        <span class="tab-label">{{ block.settings.tab_title }}</span>
      </button>
    {%- endfor -%}
  </div>

  {%- comment -%} Tab Panels {%- endcomment -%}
  <div class="tabs-content">
    {%- for block in section.blocks -%}
      <div 
        class="tab-panel{% if forloop.first %} active{% endif %}"
        role="tabpanel"
        id="tab-panel-{{ block.id }}"
        aria-labelledby="tab-{{ block.id }}"
        {% unless forloop.first %}hidden{% endunless %}
      >
        <div class="tab-panel-inner">
          {%- if block.settings.heading != blank -%}
            <h3 class="tab-heading">{{ block.settings.heading }}</h3>
          {%- endif -%}
          
          <div class="tab-content-body">
            {{ block.settings.content }}
          </div>

          {%- if block.settings.button_text != blank and block.settings.button_link != blank -%}
            <a href="{{ block.settings.button_link }}" class="tab-cta">
              {{ block.settings.button_text }}
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="16" height="16">
                <line x1="5" y1="12" x2="19" y2="12"/>
                <polyline points="12 5 19 12 12 19"/>
              </svg>
            </a>
          {%- endif -%}
        </div>
      </div>
    {%- endfor -%}
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const tabsContainer = document.querySelector('.quick-info-tabs');
    if (!tabsContainer) return;

    const tabBtns = tabsContainer.querySelectorAll('.tab-btn');
    const tabPanels = tabsContainer.querySelectorAll('.tab-panel');

    tabBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        const targetIndex = btn.dataset.tabIndex;
        
        // Update buttons
        tabBtns.forEach(b => {
          b.classList.remove('active');
          b.setAttribute('aria-selected', 'false');
        });
        btn.classList.add('active');
        btn.setAttribute('aria-selected', 'true');

        // Update panels
        tabPanels.forEach((panel, index) => {
          if (index === parseInt(targetIndex)) {
            panel.classList.add('active');
            panel.removeAttribute('hidden');
          } else {
            panel.classList.remove('active');
            panel.setAttribute('hidden', '');
          }
        });
      });

      // Keyboard navigation
      btn.addEventListener('keydown', (e) => {
        let newIndex;
        const currentIndex = parseInt(btn.dataset.tabIndex);
        
        if (e.key === 'ArrowRight') {
          newIndex = (currentIndex + 1) % tabBtns.length;
        } else if (e.key === 'ArrowLeft') {
          newIndex = (currentIndex - 1 + tabBtns.length) % tabBtns.length;
        } else {
          return;
        }
        
        e.preventDefault();
        tabBtns[newIndex].click();
        tabBtns[newIndex].focus();
      });
    });
  });
</script>

<style>
  .quick-info-tabs {
    --tab-radius: 12px;
    --transition-speed: 0.25s;
    
    max-width: 1200px;
    margin: 0 auto 2rem;
    padding: 0 1rem;
    font-family: inherit;
  }

  .tabs-nav {
    display: flex;
    gap: 0.5rem;
    border-bottom: 2px solid color-mix(in srgb, var(--accent-color) 20%, transparent);
    padding-bottom: 0;
  }

  .tab-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.875rem 1.25rem;
    background: transparent;
    border: none;
    border-bottom: 3px solid transparent;
    margin-bottom: -2px;
    cursor: pointer;
    font-size: 0.9375rem;
    font-weight: 500;
    color: #666;
    transition: all var(--transition-speed) ease;
    white-space: nowrap;
  }

  .tab-btn:hover {
    color: var(--accent-color);
    background: color-mix(in srgb, var(--accent-color) 5%, transparent);
  }

  .tab-btn.active {
    color: var(--accent-color);
    border-bottom-color: var(--accent-color);
    background: color-mix(in srgb, var(--accent-color) 8%, transparent);
  }

  .tab-icon {
    width: 20px;
    height: 20px;
    flex-shrink: 0;
  }

  .tabs-content {
    background: var(--bg-color, #fff);
    border-radius: 0 0 var(--tab-radius) var(--tab-radius);
    box-shadow: 0 4px 20px rgba(0,0,0,0.06);
    overflow: hidden;
  }

  .tab-panel {
    display: none;
    min-height: var(--tab-height);
    max-height: var(--tab-height);
    overflow-y: auto;
  }

  .tab-panel.active {
    display: block;
    animation: fadeIn var(--transition-speed) ease;
  }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .tab-panel-inner {
    padding: 1.5rem 2rem;
  }

  .tab-heading {
    margin: 0 0 0.75rem;
    font-size: 1.25rem;
    font-weight: 600;
    color: #222;
  }

  .tab-content-body {
    font-size: 0.9375rem;
    line-height: 1.7;
    color: #444;
  }

  .tab-content-body p {
    margin: 0 0 0.75rem;
  }

  .tab-content-body p:last-child {
    margin-bottom: 0;
  }

  .tab-cta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 1rem;
    padding: 0.625rem 1.25rem;
    background: var(--accent-color);
    color: #fff;
    text-decoration: none;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 6px;
    transition: all 0.2s ease;
  }

  .tab-cta:hover {
    transform: translateX(4px);
    box-shadow: 0 4px 12px color-mix(in srgb, var(--accent-color) 40%, transparent);
  }

  /* Mobile responsive */
  @media (max-width: 640px) {
    .tabs-nav {
      overflow-x: auto;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }
    
    .tabs-nav::-webkit-scrollbar {
      display: none;
    }

    .tab-btn {
      padding: 0.75rem 1rem;
      font-size: 0.875rem;
    }

    .tab-label {
      display: none;
    }

    .tab-btn.active .tab-label {
      display: inline;
    }

    .tab-icon {
      width: 22px;
      height: 22px;
    }

    .tab-panel-inner {
      padding: 1.25rem;
    }
  }
</style>

{% schema %}
{
  "name": "Quick Info Tabs",
  "tag": "section",
  "class": "section-quick-info-tabs",
  "settings": [
    {
      "type": "range",
      "id": "section_height",
      "min": 200,
      "max": 500,
      "step": 25,
      "default": 350,
      "unit": "px",
      "label": "Section Height"
    },
    {
      "type": "color",
      "id": "accent_color",
      "label": "Accent Color",
      "default": "#4834D4"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#FFFFFF"
    }
  ],
  "blocks": [
    {
      "type": "tab",
      "name": "Tab",
      "settings": [
        {
          "type": "text",
          "id": "tab_title",
          "label": "Tab Title",
          "default": "Tab"
        },
        {
          "type": "select",
          "id": "icon",
          "label": "Tab Icon",
          "options": [
            { "value": "location", "label": "Location Pin" },
            { "value": "info", "label": "Info Circle" },
            { "value": "bell", "label": "Bell/Announcements" },
            { "value": "music", "label": "Music Note" },
            { "value": "heart", "label": "Heart" },
            { "value": "calendar", "label": "Calendar" }
          ],
          "default": "info"
        },
        {
          "type": "text",
          "id": "heading",
          "label": "Content Heading",
          "default": "Heading"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Add your content here.</p>"
        },
        {
          "type": "text",
          "id": "button_text",
          "label": "Button Text (optional)"
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button Link (optional)"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Quick Info Tabs",
      "blocks": [
        {
          "type": "tab",
          "settings": {
            "tab_title": "Location",
            "icon": "location",
            "heading": "Where to Find Us",
            "content": "<p>Classes are held at J. Anderson's Books in Larchmont, NY. We also offer sessions at Larchmont Temple and Manor Beach during summer months.</p>"
          }
        },
        {
          "type": "tab",
          "settings": {
            "tab_title": "What to Expect",
            "icon": "info",
            "heading": "Your First Class",
            "content": "<p>Wear comfortable clothes for movement. We'll sing, dance, and explore rhythm together. Caregivers participate alongside childrenâ€”no musical experience needed!</p>"
          }
        },
        {
          "type": "tab",
          "settings": {
            "tab_title": "Announcements",
            "icon": "bell",
            "heading": "Latest Updates",
            "content": "<p>Winter enrollment is now open! Use code NEWBIE for 50% off your first class.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}